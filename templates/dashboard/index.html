{% extends "base.html" %}
{% block content %}
<h1 class="text-3xl font-semibold mb-6">Tableau de bord</h1>
<div class="grid gap-4 md:grid-cols-4">
    <div class="bg-white shadow rounded p-4">
        <p class="text-sm text-slate-500">Chiffre d'affaires 30j</p>
        <p class="text-2xl font-semibold">{{ revenue|floatformat:2 }} €</p>
    </div>
    <div class="bg-white shadow rounded p-4">
        <p class="text-sm text-slate-500">Panier moyen</p>
        <p class="text-2xl font-semibold">{{ avg_cart|floatformat:2 }} €</p>
    </div>
    <div class="bg-white shadow rounded p-4">
        <p class="text-sm text-slate-500">Taux no-show</p>
        <p class="text-2xl font-semibold">{{ no_show_rate|floatformat:2 }}%</p>
    </div>
    <div class="bg-white shadow rounded p-4">
        <p class="text-sm text-slate-500">Commandes</p>
        <p class="text-2xl font-semibold">{{ orders|length }}</p>
    </div>
</div>
<div class="grid gap-4 md:grid-cols-3 mt-6">
    <section class="bg-white shadow rounded p-4">
        <h2 class="text-xl font-semibold mb-2">Top services</h2>
        <ul class="space-y-2">
            {% for entry in top_services %}
                <li class="flex justify-between"><span>{{ entry.name }}</span><span>{{ entry.total_qty }}</span></li>
            {% empty %}
                <li>Aucun service vendu.</li>
            {% endfor %}
        </ul>
    </section>
    <section class="bg-white shadow rounded p-4">
        <h2 class="text-xl font-semibold mb-2">Top produits</h2>
        <ul class="space-y-2">
            {% for entry in top_products %}
                <li class="flex justify-between"><span>{{ entry.name }}</span><span>{{ entry.total_qty }}</span></li>
            {% empty %}
                <li>Aucun produit vendu.</li>
            {% endfor %}
        </ul>
    </section>
    <section class="bg-white shadow rounded p-4">
        <h2 class="text-xl font-semibold mb-2">Occupation prestataires</h2>
        <ul class="space-y-2">
            {% for entry in provider_occupation %}
                <li class="flex justify-between"><span>{{ entry.provider__name }}</span><span>{{ entry.count }}</span></li>
            {% empty %}
                <li>Aucun rendez-vous confirmé.</li>
            {% endfor %}
        </ul>
    </section>
</div>
{% endblock %}
